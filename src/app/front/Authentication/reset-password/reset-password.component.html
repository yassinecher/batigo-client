
<app-navbar></app-navbar><div  
  
  style="display: flex; " 
  class="modal modal-backdrop justify-center align-middle m-auto" 
  id="forgotPasswordModal" 
  aria-modal="true" 
  data-aos="fade" 
  role="dialog">
  
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable !w-[80%]" style="z-index: 0;">
    <div class="modal-content mt-5">
       <div class="modal-body">
        <div id="forgot-password-modal">
          <div class="login-form default-form">
            <div class="form-inner" *ngIf="!resetSuccess else sentValid">
              <h3>Réinitialiser le mot de passe</h3>
              <form *ngIf="!isLoading; else loading" [formGroup]="resetPasswordForm" class="default-form" (ngSubmit)="onResetPassword()">
      
                <!-- Password -->
                <div class="form-group">
                  <label for="password">New Password</label>
                  <input id="password" type="password" placeholder="Enter new password" formControlName="password" 
                    class="form-control" 
                    [ngClass]="{ 'is-invalid': resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched }" />
                  <div *ngIf="resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched" class="text-danger">
                    <small *ngIf="resetPasswordForm.get('password')?.errors?.['required']">Password is required.</small>
                    <small *ngIf="resetPasswordForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</small>
                  </div>
                </div>
            
                <!-- Confirm Password -->
                <div class="form-group">
                  <label for="confirmPassword">Confirm Password</label>
                  <input id="confirmPassword" type="password" placeholder="Confirm new password" formControlName="confirmPassword"
                    class="form-control" 
                    [ngClass]="{ 'is-invalid': resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched }" />
                  <div *ngIf="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched" class="text-danger">
                    <small *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">Confirmation password is required.</small>
                    <small *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['minlength']">Password must be at least 6 characters.</small>
                    <small *ngIf="resetPasswordForm.errors?.['mismatch']">Passwords do not match.</small>
                  </div>
                </div>
            
                <!-- Submit Button -->
                <div class="form-group">
                  <button class="theme-btn btn-style-one" type="submit" [disabled]="resetPasswordForm.invalid">
                    Reset Password
                  </button>
                </div>
            
                <!-- Error Message -->
                <div *ngIf="resetError.length > 0" class="text-danger">
                  <small>{{ resetError }}</small>
                </div>
              </form>
              <!-- Back to Login -->
              <div class="bottom-box">
                <div class="text">
                  Vous vous souvenez de votre mot de passe ? 
                  <a  href="/login" class="call-modal login" data-bs-toggle="modal" data-bs-dismiss="modal" data-bs-target="#loginPopupModal">Connexion</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>


<ng-template #loading>
    <div class="flex justify-center items-center h-96">
     loading.. <!-- Material spinner for loading indication -->
    </div>
  </ng-template>
  <ng-template #sentValid>
    <div class="flex justify-center items-center text-6xl text-green-700 h-44">
      <div>
        <i class="lar la-check-circle"></i>mot de passe changé avec succes.
      </div>
       <!-- Material spinner for loading indication -->
    </div>
  </ng-template>